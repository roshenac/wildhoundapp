<section class="install-gate" id="installGate" aria-live="polite">
  <div class="install-card">
    <h1>Install Wild Hound</h1>
    <p class="muted">Wild Hound can only be used from your home screen app.</p>
    <div class="btn-row">
      <button type="button" class="btn-primary" id="installAppBtn" style="display: none;">Add to Home Screen</button>
    </div>
    <p class="muted" id="installHint" style="margin-top: 8px;">Open your browser menu and choose Add to Home Screen.</p>
    <ul class="guide-list">
      <li><strong>iPhone:</strong> Tap Share, then <strong>Add to Home Screen</strong>.</li>
      <li><strong>Android:</strong> Tap browser menu, then <strong>Install app</strong> or <strong>Add to Home screen</strong>.</li>
    </ul>
  </div>
</section>

<div class="app">
  <header class="topbar">
    <div class="brand">
      Wild Hound Club
    </div>
    <span class="pill network-pill" id="networkStatusPill" aria-live="polite">Online</span>
  </header>

  <main>
    <section class="screen active" id="dashboard">
      <h1>Dashboard</h1>
      <div class="glance-row">
        <span class="glance-chip" data-glance-rank>Rank: -</span>
        <span class="glance-chip" data-glance-points>Points: 0</span>
      </div>
      <div class="card">
        <div class="meta-grid">
          <div class="meta-item">
            <div class="meta-label">User</div>
            <div class="meta-inline">
              <div class="meta-value" id="dashboardUserName">User</div>
              <button type="button" class="btn-mini" id="dashboardEditUserBtn">Edit</button>
            </div>
          </div>
          <div class="meta-item card-clickable" data-action="open-rewards" role="button" tabindex="0" aria-label="Open points and rewards">
            <div class="meta-label">Trail Dog Rank</div>
            <div class="meta-value" id="rankLabel">Trail Dog Rookie</div>
          </div>
          <div class="meta-item card-clickable" data-action="open-rewards" role="button" tabindex="0" aria-label="Open points and rewards">
            <div class="meta-label">Total Points</div>
            <div class="meta-value" id="totalPoints">0</div>
          </div>
          <div class="meta-item card-clickable" data-action="open-skills" role="button" tabindex="0" aria-label="Open skills">
            <div class="meta-label">Skills Unlocked</div>
            <div class="meta-value" id="unlockedCount">0 / 14</div>
          </div>
        </div>
        <div class="progress-wrap">
          <div class="progress-text">
            <span id="progressLabel">0 pts to Trail Dog Pathfinder</span>
            <span id="progressPct">0%</span>
          </div>
          <div class="progress"><span id="rankProgress"></span></div>
        </div>
      </div>

      <div class="dashboard-cols">
        <div class="card highlight card-clickable" data-action="open-monthly-skill" role="button" tabindex="0" aria-label="Open current monthly skill">
          <h3>Current Monthly Skill</h3>
          <p id="monthlySkillName">Loose-Lead Legends</p>
          <p class="muted" id="monthlySkillDesc">Confident loose-lead skills across trail conditions.</p>
        </div>
        <div class="card">
          <h3>Unlocked Skills</h3>
          <div class="tag-list" id="unlockedSkillsTags"></div>
        </div>
      </div>

      <div class="card">
        <h3>Activity Snapshot</h3>
        <div class="meta-grid">
          <div class="meta-item card-clickable" data-action="open-booking-assessments-booked" role="button" tabindex="0" aria-label="View booked assessments">
            <div class="meta-label">Assessments Booked</div>
            <div class="meta-value" id="statAssessmentsBooked">0</div>
          </div>
          <div class="meta-item card-clickable" data-action="open-booking-walks-booked" role="button" tabindex="0" aria-label="View booked walks">
            <div class="meta-label">Walks Booked</div>
            <div class="meta-value" id="statWalksBooked">0</div>
          </div>
          <div class="meta-item card-clickable" data-action="open-booking-walks-attended" role="button" tabindex="0" aria-label="View attended walks">
            <div class="meta-label">Walks Attended</div>
            <div class="meta-value" id="statWalksAttended">0</div>
          </div>
          <div class="meta-item card-clickable" data-action="open-skills-passed" role="button" tabindex="0" aria-label="View skills">
            <div class="meta-label">Skills Passed</div>
            <div class="meta-value" id="statSkillsPassed">0</div>
          </div>
        </div>
      </div>

      <div class="card">
        <h3>Backup Reminder</h3>
        <p class="muted" id="dashboardBackupText">Export your data regularly so you can restore progress on a new phone.</p>
        <p class="muted" id="dashboardLastBackup">Last backed up: Never</p>
        <div class="backup-tools">
          <p class="muted sync-state" id="dashboardSyncState">Sync status: Checking latest events...</p>
          <div class="btn-row backup-actions">
            <button class="btn-secondary" type="button" data-action="retry-events-sync">Sync</button>
          <button class="btn-secondary" type="button" data-action="open-about-section" data-target="about-backup">Open Backup & Restore</button>
          </div>
        </div>
      </div>

    </section>

    <section class="screen" id="skills">
      <h1>Skills Overview</h1>
      <div class="glance-row">
        <span class="glance-chip" data-glance-rank>Rank: -</span>
        <span class="glance-chip" data-glance-points>Points: 0</span>
      </div>
      <p class="muted" style="margin-bottom: 12px;">14 Wild Hound skills arranged by progression.</p>
      <div class="skills-grid" id="skillsGrid"></div>
    </section>

    <section class="screen" id="skill-detail">
      <div class="btn-row" style="margin-top: 0; margin-bottom: 8px;">
        <button class="btn-secondary" type="button" id="backToSkillsBtn">Back to Skills</button>
      </div>
      <h1 id="detailTitle">Skill Detail</h1>
      <div class="glance-row">
        <span class="glance-chip" data-glance-rank>Rank: -</span>
        <span class="glance-chip" data-glance-points>Points: 0</span>
      </div>
      <div class="card">
        <div class="inline" style="margin-bottom: 8px;">
          <p class="muted" id="detailStatus">Unlocked</p>
          <p class="muted">Points: <strong id="skillPoints">0</strong></p>
        </div>
        <p id="detailDescription"></p>
        <div id="stepsContainer" style="margin-top: 10px;"></div>

        <details id="stage5Details" class="step-locked" style="margin-top: 10px; margin-bottom: 0;">
          <summary id="level5Heading">Stage 5 (Locked)</summary>
          <p id="trailStandardText" class="muted" style="display: none;"></p>
          <div id="stage5StretchBox" class="checklist" style="margin-top: 8px; display: none;"></div>
        </details>

        <div class="btn-row">
          <button class="btn-gold" id="submitEvidenceBtn">Book In For Skill Assessment</button>
          <button class="btn-secondary" id="practiceGainBtn">Log Practice</button>
        </div>

        <div class="card" id="practiceLogPanel" style="margin-top: 10px; display: none;">
          <h3>Practice Log</h3>
          <p class="muted">Track your self-practice sessions.</p>
          <form id="practiceForm" class="form-grid">
            <label>
              Date
              <input type="date" id="practiceDate" autocomplete="off" required />
            </label>
            <label>
              Duration (minutes)
              <input type="number" id="practiceDuration" min="5" step="5" value="20" inputmode="numeric" autocomplete="off" required />
            </label>
            <label>
              Focus Area
              <select id="practiceFocus">
                <option value="Stage 1">Stage 1</option>
                <option value="Stage 2">Stage 2</option>
                <option value="Stage 3">Stage 3</option>
                <option value="Stage 4">Stage 4</option>
                <option value="Stage 5 Stretch Goal">Stage 5 Stretch Goal</option>
              </select>
            </label>
            <label>
              Notes
              <textarea id="practiceNotes" placeholder="How did the training session go?" autocapitalize="sentences" autocomplete="off"></textarea>
            </label>
            <div class="btn-row sticky-actions" style="margin-top: 0;">
              <button type="submit" class="btn-primary">Save Practice Log</button>
              <button type="button" class="btn-secondary" id="closePracticePanelBtn">Cancel</button>
            </div>
          </form>
          <details class="collapse-card" style="margin-top: 10px;">
            <summary>Recent Logs (<span id="practiceLogCount">0</span>)</summary>
            <div class="log-list" id="practiceLogList"></div>
          </details>
        </div>

        <div class="badge-placeholder" id="skillBadgeBox" style="display: none;"></div>
      </div>
    </section>

    <section class="screen" id="rewards">
      <h1>Points & Rewards</h1>
      <div class="glance-row">
        <span class="glance-chip" data-glance-rank>Rank: -</span>
        <span class="glance-chip" data-glance-points>Points: 0</span>
      </div>
      <div class="card reward-hero">
        <p class="reward-kicker">Trail Reward Journey</p>
        <p class="reward-points"><span id="rewardPoints">0</span> pts</p>
        <p class="muted" id="nextRewardText">Next reward in 0 points.</p>
        <div class="digital-badge-card" id="rewardBadgeCard" aria-live="polite">
          <div class="digital-badge-icon" id="rewardBadgeIcon">üèî</div>
          <div>
            <p class="digital-badge-title" id="rewardBadgeTitle">No Badge Yet</p>
            <p class="digital-badge-sub" id="rewardBadgeSub">Reach 75 points to unlock your first digital badge.</p>
          </div>
        </div>
        <div class="progress-wrap" style="margin-top: 12px;">
          <div class="progress-text">
            <span id="rewardJourneyLabel">Progress to next reward</span>
            <span id="rewardJourneyPct">0%</span>
          </div>
          <div class="progress"><span id="rewardJourneyProgress"></span></div>
        </div>
        <div class="btn-row">
          <button class="btn-gold" type="button" id="jumpToBookingBtn">Book Your Next Walk</button>
        </div>
      </div>

      <details class="card collapse-card" open>
        <summary>Milestone Rewards</summary>
        <p class="muted"><strong>Reward delivery:</strong> Physical rewards are currently available to UK residents only. Non-UK members receive certificates as digital email versions.</p>
        <div class="ladder" id="rewardsLadder">
          <div class="step" data-threshold="75">üß≠ Trail Dog Starter (75 pts) - Digital Badge + App Title</div>
          <div class="step" data-threshold="150">üêæ Trail Dog Rookie (150 pts) - Digital Badge + Sticker</div>
          <div class="step" data-threshold="300">ü•æ Trail Dog Explorer (300 pts) - Digital Badge + Mug</div>
          <div class="step" data-threshold="500">‚õ∞ Trail Dog Advanced (500 pts) - Digital Badge + Wild Hound Club Dog Bandana</div>
          <div class="step" data-threshold="700">üó∫Ô∏è Trail Dog Pathfinder (700 pts) - Digital Badge + Wild Hound Club Beanie + Certificate</div>
          <div class="step" data-threshold="950">üèïÔ∏è Trail Dog Expert (950 pts) - Digital Badge + Wild Hound Club Hoodie + Certificate</div>
          <div class="step" data-threshold="1250">üëë Trail Dog Master (1250 pts) - Digital Badge + ¬£100 Training Voucher + Certificate</div>
          <div class="step" data-kind="walks-attended" data-walks="10">üéñ Attend 10 Walks - Digital Badge + Priority Booking Window</div>
          <div class="step" data-kind="all-skills-pass">üèÖ All 14 Skills Passed - Digital Badge + Champion Rosette + Priority Booking Window</div>
        </div>
      </details>

      <details class="card collapse-card">
        <summary>Points History</summary>
        <div class="log-list" id="pointsHistoryList"></div>
      </details>
    </section>

    <section class="screen" id="booking">
      <h1>Assessments & Monthly Walks</h1>
      <div class="glance-row">
        <span class="glance-chip" data-glance-rank>Rank: -</span>
        <span class="glance-chip" data-glance-points>Points: 0</span>
      </div>
      <div class="card mobile-sticky-controls" id="bookingControlsCard">
        <h3>Booking Overview</h3>
        <p class="muted">See your upcoming bookings, available events, and past/completed events in one place.</p>
        <p class="muted sync-state" id="bookingSyncState">Checking latest events...</p>
        <details class="filter-drawer">
          <summary>Filters</summary>
          <div class="form-grid" style="margin-top: 10px;">
            <label>
              Event Type
              <select id="bookingTypeFilter">
                <option value="all">All Events</option>
                <option value="assessment">Assessment Days</option>
                <option value="hillwalk">Monthly Hill Walks</option>
              </select>
            </label>
            <label>
              Status
              <select id="bookingStatusFilter">
                <option value="all">All Statuses</option>
                <option value="pending">Not Booked</option>
                <option value="booked">Booked</option>
                <option value="waitlisted">Waitlisted</option>
                <option value="passed">Passed</option>
              </select>
            </label>
          </div>
        </details>
      </div>
      <div class="slots" id="bookingEvents"></div>
    </section>

    <section class="screen" id="logged">
      <h1>Logged Skills</h1>
      <div class="glance-row">
        <span class="glance-chip" data-glance-rank>Rank: -</span>
        <span class="glance-chip" data-glance-points>Points: 0</span>
      </div>
      <div class="card mobile-sticky-controls" id="loggedControlsCard">
        <p class="muted">Review all saved practice logs by skill.</p>
        <p style="margin-top: 6px;"><strong>Total Logged Sessions:</strong> <span id="totalLoggedSessions">0</span></p>
        <div class="form-grid" style="margin-top: 8px;">
          <label>
            View Logs
            <select id="loggedViewModeSelect">
              <option value="skill">Group by Skill</option>
              <option value="date">View by Date</option>
            </select>
          </label>
        </div>
        <div class="bulk-bar">
          <button class="btn-quiet" type="button" id="toggleLogSelectModeBtn">Select Multiple</button>
          <button class="btn-gold" type="button" id="deleteSelectedLogsBtn" style="display: none;">Delete Selected</button>
          <span class="muted" id="selectedLogsCountText" style="display: none;">0 selected</span>
        </div>
      </div>
      <div id="loggedSkillsList"></div>
    </section>

    <section class="screen" id="settings">
      <h1>About & FAQ</h1>
      <div class="glance-row">
        <span class="glance-chip" data-glance-rank>Rank: -</span>
        <span class="glance-chip" data-glance-points>Points: 0</span>
      </div>
      <div class="card">
        <h3>Quick Links</h3>
        <div class="btn-row">
          <button type="button" class="btn-secondary" data-action="open-about-section" data-target="about-how">How It Works</button>
          <button type="button" class="btn-secondary" data-action="open-about-section" data-target="about-points">Points</button>
          <button type="button" class="btn-secondary" data-action="open-about-section" data-target="about-rewards">Rewards</button>
          <button type="button" class="btn-secondary" data-action="open-about-section" data-target="about-contact">Contact</button>
        </div>
      </div>

      <details class="card highlight collapse-card" open>
        <summary>Free Trail Packing Guide</summary>
        <p class="muted">Download the Trail-Ready Dog Starter Guide (PDF packing list).</p>
        <div class="btn-row">
          <a class="btn-primary" href="https://dl.dropboxusercontent.com/scl/fi/8o96fvysdhv94dz4jczu3/Wild_Hound_Club_Trail-Ready_Dog_Starter_Guide.pdf?rlkey=dbtnhoxsv1hy1m5ttqctf0t7f&amp;st=yl8hnojm" target="_blank" rel="noopener noreferrer">Open Packing Guide</a>
        </div>
      </details>

      <details class="card collapse-card" id="about-how" open>
        <summary>What Wild Hound Is</summary>
        <ul class="guide-list">
          <li>Wild Hound is a progression app for outdoor dog owners.</li>
          <li>Track skill development, book events, log practice, and build points over time.</li>
          <li>Your dashboard gives quick access to rank, points, monthly skill, and activity status.</li>
        </ul>
      </details>

      <details class="card collapse-card" open>
        <summary>How Progression Works</summary>
        <ol class="guide-list">
          <li>Unlock a skill using a hill walk code or payment.</li>
          <li>Complete Stage 1 to Stage 3 practice criteria in order.</li>
          <li>At Stage 4, book assessment and apply assessor code.</li>
          <li>Your assessor records one of two outcomes at Stage 4: Passed, or Needs More Work (with discount support until pass).</li>
          <li>Stage 5 Stretch Goal unlocks only after Stage 4 is passed.</li>
        </ol>
      </details>

      <details class="card collapse-card">
        <summary>Monthly Skill Rotation</summary>
        <ul class="guide-list">
          <li>Monthly Skill rotates through skills 1 to 13 (Trail Etiquette Pro is excluded).</li>
          <li>Rotation starts with skill 1 in March 2026.</li>
          <li>Dashboard Monthly Skill card opens the skill detail (or unlock options if still locked).</li>
        </ul>
      </details>

      <details class="card collapse-card">
        <summary>Unlocking Rules</summary>
        <ul class="guide-list">
          <li>Skills can be unlocked via hill walk code or purchase flow.</li>
          <li>After Stripe success, you are returned to Skills and prompted to enter your unlock code.</li>
          <li><strong>Trail Etiquette Pro</strong> only unlocks after skills 1 to 13 are all passed.</li>
          <li>Unlocked skills are color-coded by status across Dashboard and Skills tabs.</li>
        </ul>
      </details>

      <details class="card collapse-card">
        <summary>Booking & Payments</summary>
        <ul class="guide-list">
          <li>Assessments and monthly walks are shown in chronological order.</li>
          <li>Dashboard booking stats are clickable shortcuts to filtered booking views.</li>
          <li>Booking and canceling adjusts related points based on your event history.</li>
          <li>Payment opens Stripe checkout for skill unlocks, walks, and assessments.</li>
          <li>Skill unlocks are completed when you enter your post-payment unlock code in the app.</li>
          <li><strong>Costs:</strong> Skill unlock ¬£15 (or free via related hill walk), monthly hill walk ¬£25, assessment day ¬£40.</li>
        </ul>
      </details>

      <details class="card collapse-card">
        <summary>Logs & Tracking</summary>
        <ul class="guide-list">
          <li>Log practice with skill, stage, date, duration, and notes.</li>
          <li>Edit and delete single logs or multi-select delete in Logged Skills.</li>
          <li>View logs grouped by skill or by date (month/year grouped).</li>
        </ul>
      </details>

      <details class="card collapse-card" id="about-points">
        <summary>How Points Are Earned</summary>
        <div id="pointsRuleSummary" class="muted" style="margin-top: 8px;"></div>
      </details>

      <details class="card collapse-card" id="about-rewards">
        <summary>How Reward Claims Work</summary>
        <ul class="guide-list">
          <li>Your points are lifetime progression points and are not spent when you claim a reward.</li>
          <li>When you reach a milestone, that reward can be claimed once.</li>
          <li>You can continue progressing and claim higher rewards in order as your points grow.</li>
        </ul>
      </details>

      <details class="card collapse-card">
        <summary>Reward Eligibility</summary>
        <ul class="guide-list">
          <li>Physical rewards are currently for UK residents only.</li>
          <li>If you are outside the UK, certificates may be sent in digital form by email.</li>
          <li>Merch rewards include Wild Hound Club bandana, beanie, and hoodie tiers.</li>
        </ul>
      </details>

      <details class="card collapse-card">
        <summary>Training Voucher (Master Reward)</summary>
        <ul class="guide-list">
          <li>The Trail Dog Master reward includes a <strong>¬£100 training voucher</strong>.</li>
          <li>The voucher can be used with affiliated trainers, including selected sessions such as scent work classes, sheep training, or other eligible specialist workshops.</li>
          <li>Voucher use is subject to class availability, booking windows, and any stated expiry terms at issue date.</li>
        </ul>
      </details>

      <details class="card collapse-card">
        <summary>Data, Sync & Devices</summary>
        <ul class="guide-list">
          <li>Your profile name, progress, and logs are saved on your device.</li>
          <li>Upcoming events and booking availability update automatically in the app.</li>
          <li>If you change phone or clear browser/app data, local progress may reset.</li>
        </ul>
        <p class="muted sync-state" id="aboutSyncState">Sync status: Not checked yet.</p>
      </details>

      <details class="card collapse-card" id="about-backup">
        <summary>Backup & Restore</summary>
        <p class="muted">Export your progress to a backup file, then import it on a new phone/device.</p>
        <div class="btn-row">
          <button type="button" class="btn-secondary" id="aboutExportDataBtn">Export My Data</button>
          <button type="button" class="btn-secondary" id="aboutImportDataBtn">Import Backup</button>
          <button type="button" class="btn-secondary" id="aboutValidateDataBtn">Check Backup File</button>
          <input type="file" id="aboutImportDataFile" accept="application/json,.json" style="display:none" />
          <input type="file" id="aboutValidateDataFile" accept="application/json,.json" style="display:none" />
        </div>
      </details>

      <details class="card collapse-card" id="about-contact">
        <summary>Contact Us</summary>
        <p class="muted">Need help with rewards, bookings, or your account?</p>
        <div class="btn-row">
          <a class="btn-secondary" href="mailto:wildhoundclub@hotmail.com">Email wildhoundclub@hotmail.com</a>
        </div>
      </details>

    </section>
  </main>
</div>

<div class="mobile-sticky-cta" id="mobileStickyCta">
  <button class="btn-gold" type="button" id="mobileStickyCtaBtn">Book In For Skill Assessment</button>
</div>

<nav class="bottom-nav">
  <a class="tab-btn active" data-screen="dashboard" href="dashboard.html"><svg class="icon" viewBox="0 0 24 24"><path d="M3 11l9-7 9 7"></path><path d="M5 10v10h14V10"></path></svg>Home</a>
  <a class="tab-btn" data-screen="skills" href="skills.html"><svg class="icon" viewBox="0 0 24 24"><path d="M4 6h16"></path><path d="M4 12h16"></path><path d="M4 18h16"></path></svg>Skills</a>
  <a class="tab-btn" data-screen="rewards" href="rewards.html"><svg class="icon" viewBox="0 0 24 24"><path d="M12 3l3 6 6 .9-4.4 4.2 1 6L12 17l-5.6 3.1 1-6L3 9.9 9 9z"></path></svg>Rewards</a>
  <a class="tab-btn" data-screen="booking" href="booking.html"><svg class="icon" viewBox="0 0 24 24"><rect x="3" y="5" width="18" height="16" rx="2"></rect><path d="M7 3v4"></path><path d="M17 3v4"></path><path d="M3 10h18"></path></svg>Booking</a>
  <a class="tab-btn" data-screen="logged" href="logged.html"><svg class="icon" viewBox="0 0 24 24"><path d="M8 6h13"></path><path d="M8 12h13"></path><path d="M8 18h13"></path><circle cx="4" cy="6" r="1.5"></circle><circle cx="4" cy="12" r="1.5"></circle><circle cx="4" cy="18" r="1.5"></circle></svg>Logged</a>
  <a class="tab-btn" data-screen="settings" href="about.html"><svg class="icon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3.2"></circle><path d="M12 3v2.2"></path><path d="M12 18.8V21"></path><path d="M3 12h2.2"></path><path d="M18.8 12H21"></path><path d="M5.8 5.8l1.6 1.6"></path><path d="M16.6 16.6l1.6 1.6"></path><path d="M18.2 5.8l-1.6 1.6"></path><path d="M7.4 16.6l-1.6 1.6"></path></svg>About</a>
</nav>

<div class="toast-wrap" id="toastWrap"></div>

<div class="modal-backdrop" id="logEditModalBackdrop">
  <div class="modal">
    <h3>Edit Log</h3>
    <form id="logEditForm" class="form-grid">
      <label>
        Skill
        <select id="logEditSkill" required></select>
      </label>
      <label>
        Date
        <input type="date" id="logEditDate" autocomplete="off" required />
      </label>
      <label>
        Step
        <select id="logEditStep">
          <option value="Stage 1">Stage 1</option>
          <option value="Stage 2">Stage 2</option>
          <option value="Stage 3">Stage 3</option>
          <option value="Stage 4">Stage 4</option>
          <option value="Stage 5 Stretch Goal">Stage 5 Stretch Goal</option>
        </select>
      </label>
      <label>
        Duration (minutes)
        <input type="number" id="logEditDuration" min="1" inputmode="numeric" autocomplete="off" required />
      </label>
      <label>
        Comment
        <textarea id="logEditComment" autocapitalize="sentences" autocomplete="off"></textarea>
      </label>
      <div class="btn-row sticky-actions" style="margin-top: 0;">
        <button type="submit" class="btn-primary">Save Changes</button>
        <button type="button" class="btn-secondary" id="cancelLogEditBtn">Cancel</button>
      </div>
    </form>
  </div>
</div>

<div class="modal-backdrop" id="unlockSkillModalBackdrop">
  <div class="modal">
    <h3 id="unlockSkillTitle">Unlock Skill</h3>
    <p class="muted" id="unlockSkillPrompt">Choose how you want to unlock this skill.</p>
    <ol class="guide-list" id="unlockSkillSteps">
      <li>Pay for this skill in Stripe.</li>
      <li>Receive your purchase unlock code by email.</li>
      <li>Return here and enter the code to unlock.</li>
    </ol>
    <div class="btn-row">
      <button type="button" class="btn-primary" id="unlockViaCodeBtn">Enter Unlock Code</button>
      <button type="button" class="btn-secondary" id="unlockViaPaymentBtn">Pay for This Skill</button>
      <button type="button" class="btn-secondary" id="unlockSkillCancelBtn">Cancel</button>
    </div>
    <div id="unlockCodeSection" class="form-grid" style="display: none; margin-top: 10px;">
      <label>
        Unlock Code
        <input type="text" id="unlockCodeInput" placeholder="Enter hill walk or purchase code" autocapitalize="characters" spellcheck="false" autocomplete="one-time-code" />
      </label>
      <div class="btn-row" style="margin-top: 0;">
        <button type="button" class="btn-primary" id="unlockCodeSubmitBtn">Unlock with Code</button>
        <button type="button" class="btn-secondary" id="unlockCodeCancelBtn">Back</button>
      </div>
    </div>
  </div>
</div>

<div class="modal-backdrop" id="rewardClaimModalBackdrop">
  <div class="modal">
    <h3>Claim Reward</h3>
    <p class="muted" id="rewardClaimPrompt">Complete the embedded claim form below.</p>
    <div class="card" style="padding: 0; overflow: hidden; margin-bottom: 10px;">
      <iframe
        id="rewardClaimFrame"
        title="Reward claim form"
        src="about:blank"
        style="width: 100%; min-height: 520px; border: 0; background: #fffdf8;"
        loading="lazy"
        referrerpolicy="no-referrer"
      ></iframe>
    </div>
    <div class="btn-row sticky-actions" style="margin-top: 0;">
      <button type="button" class="btn-primary" id="rewardClaimSubmittedBtn">I've Submitted Form</button>
      <button type="button" class="btn-secondary" id="rewardClaimOpenTabBtn">Open in New Tab</button>
      <button type="button" class="btn-secondary" id="rewardClaimCancelBtn">Close</button>
    </div>
  </div>
</div>
